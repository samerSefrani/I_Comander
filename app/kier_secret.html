<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secret Page</title>
</head>
<body>
<h4>Welcome to this secret page.</h4>

<p id = 'sec_data'></p>
<a href="kier_test.html">Kier Test</a>
<a href="profile">Kier Test</a>
<a href="logout">Logout</a>
</body>
</html>

<script>
p = document.getElementById('sec_data');


  //https://stackoverflow.com/a/34592377
  // you have to have {credentials: "same-origin"} otherwise fetch wont send the cookies in the request
  // (but it works in chrome) lol
  res = fetch('api/kier_secret',{credentials: "same-origin"}).then(response => {
    if (!response.ok) {
      throw Error(response.statusText);
    }
      response.json().then(d=>{
          console.log(d);
          p.innerHTML = d[0].data;

      });
      // r = response.body.getReader();
      // r.read().then(d =>  console.log(d.value.));

      console.log(response)
  });




</script>